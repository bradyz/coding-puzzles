<!DOCTYPE html>
<html>
<style type="text/css">
.xMarker, .oMarker {
    font-family: sans-serif;
    text-align: center;
    height: 50px;
    width: 50px;
    display: inline-block;
    font-size: 75px;
}
.xMarker:before {
    content: "x";
}
.oMarker:before {
    content: "o";
}
.gridRow {
    display: block;
}
.front {
    backface-visibility: hidden;
    position: absolute;
    transform: rotateY(0deg);
}
.back {
    backface-visibility: hidden;
    transform: rotateY(180deg);
}
.flip {
    transform: rotateY(180deg);
}
.container {
    transform-style: preserve-3d;
    transition: .6s;
    perspective: 600px;
    display: inline-block;
}
#button {
    margin: 15px 15px;
    text-align: center;
    padding: 10px 10px;
    border: 2px solid #000;
    border-radius: 10px;
    width: 10%;
    height: 10%;
    cursor: pointer;
}
</style>
    <body>
        <div id="theGrid"></div>
        <script>
        // Necessary as vanilla javascript doesn't contain
        // Query strings.
        var myUrl = window.location.href;
        var queryPos = window.location.href.indexOf("?");
        var params = myUrl.substring(queryPos + 1).split("&");
        var dimen = {};

        for(i = 0; i < params.length; i++) {
            var keyVal = params[i].split("=");
            dimen[keyVal[0]] = keyVal[1];
        }
        console.log(dimen);
        
        var width;
        var height;

        if('height' in dimen && 'width' in dimen) {
            width = dimen.height;
            height = dimen.width;
        }

        var snippet = "";
        var markerStyles = ["xMarker", "oMarker"];

        for(h = 0; h < height; h++) {
            snippet += '<div class="gridRow">';
            for(w = 0; w < width; w++) {
                var front = Math.floor(Math.random() * markerStyles.length);
                var back = Math.abs(front - 1);
                snippet += '<div class="container">';
                snippet += '<div class="front ';
                snippet += markerStyles[front];
                snippet += '"><\/div>';
                snippet += '<div class="back ';
                snippet += markerStyles[back];
                snippet += '"><\/div>';
                snippet += '<\/div>';
            }
            snippet += '<\/div>';
        }
        
        var asdf = document.getElementById("theGrid");
        asdf.innerHTML = snippet;
        
        </script>

        <div id="button"> Flip </div>

        <script>
        var button = document.getElementById('button');
        button.onclick = function() {
            var containers = document.getElementsByClassName('container');

            var flips = document.getElementsByClassName('flip');
            if(flips.length == 0) {
                for(i = 0; i < containers.length; i++) {
                    containers[i].classList.add('flip');
                }
            }
            else {
                for(i = 0; i < containers.length; i++) {
                    containers[i].classList.remove('flip');
                }
            }
        };
        </script>
    </body>
</html> 
